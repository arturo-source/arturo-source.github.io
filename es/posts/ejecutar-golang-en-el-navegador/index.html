<!doctype html><html lang=es dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Execute Golang in Browser | Arturo Source website</title>
<meta name=keywords content><meta name=description content="Mini tutorial para ejecutar Golang en el navegador, usando WASM."><meta name=author content><link rel=canonical href=https://arturo-source.github.io/es/posts/ejecutar-golang-en-el-navegador/><link crossorigin=anonymous href=/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=https://arturo-source.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://arturo-source.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://arturo-source.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://arturo-source.github.io/apple-touch-icon.png><link rel=mask-icon href=https://arturo-source.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://arturo-source.github.io/posts/execute-golang-in-browser/><link rel=alternate hreflang=es href=https://arturo-source.github.io/es/posts/ejecutar-golang-en-el-navegador/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://arturo-source.github.io/es/posts/ejecutar-golang-en-el-navegador/"><meta property="og:site_name" content="Arturo Source website"><meta property="og:title" content="Execute Golang in Browser"><meta property="og:description" content="Mini tutorial para ejecutar Golang en el navegador, usando WASM."><meta property="og:locale" content="es"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-25T19:36:48+01:00"><meta property="article:modified_time" content="2024-01-25T19:36:48+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Execute Golang in Browser"><meta name=twitter:description content="Mini tutorial para ejecutar Golang en el navegador, usando WASM."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://arturo-source.github.io/es/posts/"},{"@type":"ListItem","position":2,"name":"Execute Golang in Browser","item":"https://arturo-source.github.io/es/posts/ejecutar-golang-en-el-navegador/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Execute Golang in Browser","name":"Execute Golang in Browser","description":"Mini tutorial para ejecutar Golang en el navegador, usando WASM.","keywords":[],"articleBody":"El objetivo de este art铆culo es convertir mi aplicaci贸n de terminal poker-odds, en una aplicaci贸n que se pueda usar en el naveegador.\nPara este ejemplo utilizar茅 tinygo, que es un compilador de Go para microprocesadores, que tambi茅n produce c贸digo WASM. Si quieres ver c贸mo se hace con el compilador de Go normal, puedes verlo en la wiki de Go.\nCompilar el c贸digo de Go Recuerda tener el compilador de tinygo instalado. Para compilar el c贸digo de Go a c贸digo WASM, utilizar茅 el siguiente comando:\ntinygo build -o wasm.wasm -target wasm ./main.go tinygo es el compilador. build sirve para compilar el c贸digo. -o wasm.wasm le indico d贸nde quiero que se guarde el WASM compilado. -target wasm le indico que quiero compilar a WASM, y no a un microprocesador. ./main.go es donde est谩 el c贸digo Go. Dentro del archivo ./main.go, tendr茅 un c贸digo como el siguiente:\npackage main func main() {} //export multiply func multiply(x, y int) int { return x * y; } Es muy importante el comentario //export multiply. Sin 茅l, no podr谩s ejecutar la funci贸n desde JavaScript.\nEjecutar el c贸digo de Go desde JavaScript Una vez el c贸digo ha sido compilado, hay que cargar el c贸digo en el navegador, la manera m谩s sencilla es creando un index.html.\n\u003c!DOCTYPE html\u003e \u003chtml lang=\"en\"\u003e \u003chead\u003e \u003cscript src=\"/wasm_exec.js\"\u003e\u003c/script\u003e \u003cscript\u003e const go = new Go(); // Defined in wasm_exec.js const WASM_URL = '/wasm.wasm'; var wasm; if ('instantiateStreaming' in WebAssembly) { WebAssembly.instantiateStreaming(fetch(WASM_URL), go.importObject).then(function (obj) { wasm = obj.instance; go.run(wasm); }) } else { fetch(WASM_URL).then(resp =\u003e resp.arrayBuffer() ).then(bytes =\u003e WebAssembly.instantiate(bytes, go.importObject).then(function (obj) { wasm = obj.instance; go.run(wasm); }) ) } \u003c/script\u003e \u003c/head\u003e \u003cbody\u003e \u003c/body\u003e \u003c/html\u003e A la vista quedan dos scripts. El primero carga un archivo wasm_exec.js. Es importante, porque es lo que hace que puedas ejecutar const go = new Go(); posteriormente. Puedes encontrar este fichero dentro de tu sistema operativo, ejecutando el siguiente comando en Linux:\nfind / -name wasm_exec.js Este comando buscar谩 todos los archivos en tu sistema operativo llamados wasm_exec.js. Yo lo copiar茅 en la misma carpeta que mi index.html.\nTambi茅n lo encontrar谩s en https://github.com/tinygo-org/tinygo/blob/release/targets/wasm_exec.js, pero puedes tener problemas si la versi贸n de tinygo de GitHub no es la misma que la tuya.\nIniciar un servidor HTTP Existen multiples formas de tener un servidor HTTP r谩pidamente. Abre una terminal, y ve a la carpeta donde tengas el wasm_exec.js, index.html, y wasm.wasm.\nCon lenguajes interpretados como python puedes poner simplemente python -m http.server 8000. Para PHP php -S 127.0.0.1:8000. Cualquiera de los dos comandos abrir谩 un servidor HTTP en el puerto 8000, pero si prefieres compilar un peque帽o servidor con Go, copia lo siguiente:\npackage main import ( \"flag\" \"log\" \"net/http\" ) func main() { port := flag.String(\"p\", \"8000\", \"port to serve\") directory := flag.String(\"d\", \".\", \"directory to host\") flag.Parse() http.Handle(\"/\", http.FileServer(http.Dir(*directory))) log.Printf(\"Serving %s on: http://127.0.0.1:%s\\n\", *directory, *port) log.Fatal(http.ListenAndServe(\":\"+*port, nil)) } Compila el c贸digo con go build, y ejecutalo. Recuerda que puedes cambiar las opciones -p para cambiar el puerto, y -d para la carpeta que quieres servir.\nAhora s铆, a multiplicar usando Go desde JavaScript Despu茅s de un largo proceso, ya puedo ejecutar el c贸digo WASM. Entro a la url http://127.0.0.1:8000/, me aparece una p谩gina en blanco, pero si abro las herramientas de desarrollador (pulsando F12, ctrl + shift + i, o como se haga en tu navegador/sistema operativo). Y en la terminal de JavaScript escribo wasm.exports.multiply(4,5), y la funci贸n devuelve 20.\nCrear la herramienta de poker-odds en HTML Ahora ya tengo una funci贸n que multiplica en Go, que se puede llamar desde JavaScript, mediante WASM. No tiene que ser tan dif铆cil portar mi c贸digo. Lo primero que voy a hacer es un fork de mi repositorio, porque la aplicaci贸n est谩 completamente pensada para ser usada desde terminal, as铆 que habr谩 que cambiar bastantes cosas. Este es el nuevo repositorio que funcionar谩 con WASM.\nHacer el fork de poker-odds Para hacer el fork, he tenido que crear un repositorio desde cero (porque no puedes hacer forks de tus propios repositorios), clonar el repositorio original, cambiar el remote origin url, y hacer un push al nuevo repositorio. Con los siguientes comandos:\ngit clone git@github.com:arturo-source/poker-odds.git poker-odds-wasm cd poker-odds-wasm/ git remote -v # show old repositories git remote set-url origin git@github.com:arturo-source/poker-odds-wasm.git git push -u origin main Modificar el programa para que funcione con WASM La estrategia que voy a seguir es, que el propio programa de Go devuelva el HTML. Otra opci贸n ser铆a ejecutar la l贸gica en Go, devolver el resultado a JavaScript, y manipular el DOM para insertar los datos.\nHabitualmente se recomienda esta 煤ltima porque manipular el DOM con WASM es m谩s costoso que con JavaScript, pero he encontrado incompatibilidades entre Go y WASM que no me permiten portar algunas funciones hechas en Go, para que se ejecuten en JS (por ejemplo, en Go una funci贸n puede devolver multiples valores, y cuando lo compilas a WASM no funciona).\nUna ventaja de crear el HTML desde Go es que el estado de la aplicaci贸n se mantiene en Go, en JavaScript s贸lo har茅 una funci贸n para incrustar el HTML. Manejar el estado desde Go hace m谩s sencilla la l贸gica del programa.\nLas modificaciones ser谩n las siguientes:\nEliminar el archivo console.go (contiene c贸mo imprimir o leer la consola). Extraer el func main en un func getResultsInHTML para poder exportarlo, y poder usarlo mediante WASM. Usar la l贸gica de func parseCommandLine para parsear el input del usuario con func parseUserInputs. Usar un template en HTML que emita un resultado parecido a func printResults. Una vez he programado estos cambios, llega la hora de compilar, vuelvo a ejecutar tinygo build -o wasm.wasm -target wasm ./main.go, inserto el wasm.wasm en el HTML como he hecho con el ejemplo de multiplicar, y\nWTF!? No funciona Despu茅s de todo este tiempo adaptando el programa, obtengo el error panic: unimplemented: (reflect.Type).NumOut(). Ya sospechaba que el compilador de tinygo no ser铆a tan completo como el de go, pero a煤n puedo probar con el compilador oficial.\nPara los interesados, este es el error que estoy obteniendo:\nUncaught RuntimeError: unreachable at runtime._panic (wasm.wasm:0x2b2a) at (poker-odds-wasm/*reflect.rawType).NumOut (http://localhost:8000/poker-odds-wasm/wasm.wasm) at interface:{Align:func:{}{basic:int},AssignableTo:func:{named:reflect.Type}{basic:bool},Bits:func:{}{basic:int},ChanDir:func:{}{named:reflect.ChanDir},Comparable:func:{}{basic:bool},ConvertibleTo:func:{named:reflect.Type}{basic:bool},Elem:func:{}{named:reflect.Type},Field:func:{basic:int}{named:reflect.StructField},FieldAlign:func:{}{basic:int},FieldByIndex:func:{slice:basic:int}{named:reflect.StructField},FieldByName:func:{basic:string}{named:reflect.StructField,basic:bool},FieldByNameFunc:func:{func:{basic:string}{basic:bool}}{named:reflect.StructField,basic:bool},Implements:func:{named:reflect.Type}{basic:bool},In:func:{basic:int}{named:reflect.Type},IsVariadic:func:{}{basic:bool},Key:func:{}{named:reflect.Type},Kind:func:{}{named:reflect.Kind},Len:func:{}{basic:int},Method:func:{basic:int}{named:reflect.Method},MethodByName:func:{basic:string}{named:reflect.Method,basic:bool},Name:func:{}{basic:string},NumField:func:{}{basic:int},NumIn:func:{}{basic:int},NumMethod:func:{}{basic:int},NumOut:func:{}{basic:int},Out:func:{basic:int}{named:reflect.Type},PkgPath:func:{}{basic:string},Size:func:{}{basic:uintptr},String:func:{}{basic:string}}.NumOut$invoke (wasm.wasm:0x935ed) at text/template.goodFunc (wasm.wasm:0x9358e) at text/template.addValueFuncs (wasm.wasm:0x944da) at (poker-odds-wasm/*text/template.Template).Funcs (http://localhost:8000/poker-odds-wasm/wasm.wasm) at (poker-odds-wasm/*html/template.Template).Execute (http://localhost:8000/poker-odds-wasm/wasm.wasm) at getResultsInHTML (wasm.wasm:0xb6ce2) at getResultsInHTML.command_export (wasm.wasm:0xba714) at HTMLFormElement. (poker-odds-wasm/:119:35) Diferencias entre el compilador oficial de go y tinygo El motivo para utilizar tinygo era que este est谩 preparado para arquitecturas con menos memoria, y produce ejecutables m谩s peque帽os, pero he descubierto que tambi茅n es significativamente m谩s lento. En concreto, en mi ordenador con arquitectura linux/amd64, he obtenido los siguientes resultados:\ntinygo go build go build -ldflags=\"-s -w\" version 0.30.0 1.21.6 1.21.6 time 14,536s 0,080s 0,086s size 1,8M 2,6M 2,5M size syscall/js ? 5,2M 5,1M Vuelvo a insertar el WASM en el navegador Parece que hay otro problema, Uncaught TypeError: Cannot read properties of undefined (reading 'exports'). Nada raro, solo tengo que utilizar el wasm_exec.js de mi versi贸n de Go, que es distinto al de la versi贸n de tinygo. Lo busco con el comando find, como antes, y lo copio de la ruta /usr/lib/go/misc/wasm/wasm_exec.js.\nUn nuevo error aparece Uncaught TypeError: wasm.exports.getResultsInHTML is not a function, debe ser porque el compilador de Go exporta las funciones de una manera distinta, no con //export getResultsInHTML.\nPara comunicar con JS necesitar茅 el paquete https://pkg.go.dev/syscall/js. Las funciones se registran desde el main, y el programa no puede terminar, as铆 que se bloquea el hilo utilizando un canal \u003c-make(chan bool). Adem谩s la funci贸n tiene que ser del tipo js.FuncOf -\u003e func(this js.Value, args []js.Value) any.\nfunc main() { js.Global().Set(\"getResultsInHTML\", js.FuncOf(func(this js.Value, args []js.Value) any { handsStr := args[0].String() boardStr := args[1].String() return getResultsInHTML(handsStr, boardStr) })) // listen infinite \u003c-make(chan bool) } Ahora la funci贸n es global en JavaScript, no se llama con wasm.exports.getResultsInHTML sino directamente getResultsInHTML.\nUsar poker-odds A continuaci贸n he insertado un iframe con el c贸digo necesario, para que puedas probar el resultado final.\n","wordCount":"1295","inLanguage":"es","datePublished":"2024-01-25T19:36:48+01:00","dateModified":"2024-01-25T19:36:48+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://arturo-source.github.io/es/posts/ejecutar-golang-en-el-navegador/"},"publisher":{"@type":"Organization","name":"Arturo Source website","logo":{"@type":"ImageObject","url":"https://arturo-source.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://arturo-source.github.io/es/ accesskey=h title="Arturo Source website (Alt + H)">Arturo Source website</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://arturo-source.github.io/ title=English aria-label=:uk:></a></li></ul></div></div><ul id=menu><li><a href=https://arturo-source.github.io/es/archivo/ title=Archivo><span>Archivo</span></a></li><li><a href=https://arturo-source.github.io/es/buscar/ title=Buscar><span>Buscar</span></a></li><li><a href=https://arturo-source.github.io/es/tags/ title=Etiquetas><span>Etiquetas</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://arturo-source.github.io/es/>Inicio</a>&nbsp;禄&nbsp;<a href=https://arturo-source.github.io/es/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Execute Golang in Browser</h1><div class=post-description>Mini tutorial para ejecutar Golang en el navegador, usando WASM.</div><div class=post-meta><span title='2024-01-25 19:36:48 +0100 +0100'>enero 25, 2024</span>&nbsp;路&nbsp;7 min&nbsp;|&nbsp;Traducciones:<ul class=i18n_list><li><a href=https://arturo-source.github.io/posts/execute-golang-in-browser/></a></li></ul></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Tabla de Contenidos</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#compilar-el-c贸digo-de-go>Compilar el c贸digo de Go</a></li><li><a href=#ejecutar-el-c贸digo-de-go-desde-javascript>Ejecutar el c贸digo de Go desde JavaScript</a><ul><li><a href=#iniciar-un-servidor-http>Iniciar un servidor HTTP</a></li><li><a href=#ahora-s铆-a-multiplicar-usando-go-desde-javascript>Ahora s铆, a multiplicar usando Go desde JavaScript</a></li></ul></li><li><a href=#crear-la-herramienta-de-poker-odds-en-html>Crear la herramienta de poker-odds en HTML</a><ul><li><a href=#hacer-el-fork-de-poker-odds>Hacer el fork de poker-odds</a></li><li><a href=#modificar-el-programa-para-que-funcione-con-wasm>Modificar el programa para que funcione con WASM</a></li></ul></li><li><a href=#wtf-no-funciona>WTF!? No funciona</a><ul><li><a href=#diferencias-entre-el-compilador-oficial-de-go-y-tinygo>Diferencias entre el compilador oficial de go y tinygo</a></li><li><a href=#vuelvo-a-insertar-el-wasm-en-el-navegador>Vuelvo a insertar el WASM en el navegador</a></li></ul></li><li><a href=#usar-poker-odds>Usar poker-odds</a></li></ul></nav></div></details></div><div class=post-content><p>El objetivo de este art铆culo es convertir mi aplicaci贸n de terminal <a href=https://github.com/arturo-source/poker-odds>poker-odds</a>, en una aplicaci贸n que se pueda usar en el naveegador.</p><p>Para este ejemplo utilizar茅 <code>tinygo</code>, que es un compilador de Go para microprocesadores, que tambi茅n produce c贸digo WASM. Si quieres ver c贸mo se hace con el compilador de Go normal, puedes verlo <a href=https://github.com/golang/go/wiki/WebAssembly>en la wiki de Go</a>.</p><h2 id=compilar-el-c贸digo-de-go>Compilar el c贸digo de Go<a hidden class=anchor aria-hidden=true href=#compilar-el-c贸digo-de-go>#</a></h2><p>Recuerda tener el <a href=https://tinygo.org/getting-started/install/>compilador de <code>tinygo</code> instalado</a>. Para compilar el c贸digo de Go a c贸digo WASM, utilizar茅 el siguiente comando:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>tinygo build -o wasm.wasm -target wasm ./main.go
</span></span></code></pre></div><ul><li><strong>tinygo</strong> es el compilador.</li><li><strong>build</strong> sirve para compilar el c贸digo.</li><li><strong>-o wasm.wasm</strong> le indico d贸nde quiero que se guarde el WASM compilado.</li><li><strong>-target wasm</strong> le indico que quiero compilar a WASM, y no a un microprocesador.</li><li><strong>./main.go</strong> es donde est谩 el c贸digo Go.</li></ul><p>Dentro del archivo <strong>./main.go</strong>, tendr茅 un c贸digo como el siguiente:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//export multiply</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>multiply</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span> <span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>int</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>y</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Es <strong>muy importante</strong> el comentario <code>//export multiply</code>. Sin 茅l, no podr谩s ejecutar la funci贸n desde JavaScript.</p><h2 id=ejecutar-el-c贸digo-de-go-desde-javascript>Ejecutar el c贸digo de Go desde JavaScript<a hidden class=anchor aria-hidden=true href=#ejecutar-el-c贸digo-de-go-desde-javascript>#</a></h2><p>Una vez el c贸digo ha sido compilado, hay que cargar el c贸digo en el navegador, la manera m谩s sencilla es creando un <code>index.html</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#75715e>&lt;!DOCTYPE html&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>html</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;en&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/wasm_exec.js&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>go</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Go</span>(); <span style=color:#75715e>// Defined in wasm_exec.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>WASM_URL</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;/wasm.wasm&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>wasm</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#e6db74>&#39;instantiateStreaming&#39;</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>WebAssembly</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>WebAssembly</span>.<span style=color:#a6e22e>instantiateStreaming</span>(<span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>WASM_URL</span>), <span style=color:#a6e22e>go</span>.<span style=color:#a6e22e>importObject</span>).<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>obj</span>) {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>wasm</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>obj</span>.<span style=color:#a6e22e>instance</span>;
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>go</span>.<span style=color:#a6e22e>run</span>(<span style=color:#a6e22e>wasm</span>);
</span></span><span style=display:flex><span>            })
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>WASM_URL</span>).<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>resp</span> =&gt;
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>arrayBuffer</span>()
</span></span><span style=display:flex><span>            ).<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>bytes</span> =&gt;
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>WebAssembly</span>.<span style=color:#a6e22e>instantiate</span>(<span style=color:#a6e22e>bytes</span>, <span style=color:#a6e22e>go</span>.<span style=color:#a6e22e>importObject</span>).<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>obj</span>) {
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>wasm</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>obj</span>.<span style=color:#a6e22e>instance</span>;
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>go</span>.<span style=color:#a6e22e>run</span>(<span style=color:#a6e22e>wasm</span>);
</span></span><span style=display:flex><span>                })
</span></span><span style=display:flex><span>            )
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>html</span>&gt;
</span></span></code></pre></div><p>A la vista quedan dos scripts. El primero carga un archivo <code>wasm_exec.js</code>. Es importante, porque es lo que hace que puedas ejecutar <code>const go = new Go();</code> posteriormente. Puedes encontrar este fichero dentro de tu sistema operativo, ejecutando el siguiente comando en Linux:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>find / -name wasm_exec.js
</span></span></code></pre></div><p>Este comando buscar谩 todos los archivos en tu sistema operativo llamados <code>wasm_exec.js</code>. Yo lo copiar茅 en la misma carpeta que mi <code>index.html</code>.</p><p>Tambi茅n lo encontrar谩s en <a href=https://github.com/tinygo-org/tinygo/blob/release/targets/wasm_exec.js>https://github.com/tinygo-org/tinygo/blob/release/targets/wasm_exec.js</a>, pero puedes tener problemas si la versi贸n de <code>tinygo</code> de GitHub no es la misma que la tuya.</p><h3 id=iniciar-un-servidor-http>Iniciar un servidor HTTP<a hidden class=anchor aria-hidden=true href=#iniciar-un-servidor-http>#</a></h3><p>Existen multiples formas de tener un servidor HTTP r谩pidamente. Abre una terminal, y ve a la carpeta donde tengas el <code>wasm_exec.js</code>, <code>index.html</code>, y <code>wasm.wasm</code>.</p><p>Con lenguajes interpretados como python puedes poner simplemente <code>python -m http.server 8000</code>. Para PHP <code>php -S 127.0.0.1:8000</code>. Cualquiera de los dos comandos abrir谩 un servidor HTTP en el puerto 8000, pero si prefieres compilar un peque帽o servidor con Go, copia lo siguiente:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;flag&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;log&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>port</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>String</span>(<span style=color:#e6db74>&#34;p&#34;</span>, <span style=color:#e6db74>&#34;8000&#34;</span>, <span style=color:#e6db74>&#34;port to serve&#34;</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>directory</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>String</span>(<span style=color:#e6db74>&#34;d&#34;</span>, <span style=color:#e6db74>&#34;.&#34;</span>, <span style=color:#e6db74>&#34;directory to host&#34;</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>Parse</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Handle</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>FileServer</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Dir</span>(<span style=color:#f92672>*</span><span style=color:#a6e22e>directory</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;Serving %s on: http://127.0.0.1:%s\n&#34;</span>, <span style=color:#f92672>*</span><span style=color:#a6e22e>directory</span>, <span style=color:#f92672>*</span><span style=color:#a6e22e>port</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ListenAndServe</span>(<span style=color:#e6db74>&#34;:&#34;</span><span style=color:#f92672>+*</span><span style=color:#a6e22e>port</span>, <span style=color:#66d9ef>nil</span>))
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Compila el c贸digo con <code>go build</code>, y ejecutalo. Recuerda que puedes cambiar las opciones <code>-p</code> para cambiar el puerto, y <code>-d</code> para la carpeta que quieres servir.</p><h3 id=ahora-s铆-a-multiplicar-usando-go-desde-javascript>Ahora s铆, a multiplicar usando Go desde JavaScript<a hidden class=anchor aria-hidden=true href=#ahora-s铆-a-multiplicar-usando-go-desde-javascript>#</a></h3><p>Despu茅s de un largo proceso, ya puedo ejecutar el c贸digo WASM. Entro a la url <a href=http://127.0.0.1:8000/>http://127.0.0.1:8000/</a>, me aparece una p谩gina en blanco, pero si abro las herramientas de desarrollador (pulsando <code>F12</code>, <code>ctrl + shift + i</code>, o como se haga en tu navegador/sistema operativo). Y en la terminal de JavaScript escribo <code>wasm.exports.multiply(4,5)</code>, y la funci贸n devuelve 20.</p><h2 id=crear-la-herramienta-de-poker-odds-en-html>Crear la herramienta de poker-odds en HTML<a hidden class=anchor aria-hidden=true href=#crear-la-herramienta-de-poker-odds-en-html>#</a></h2><p>Ahora ya tengo una funci贸n que multiplica en Go, que se puede llamar desde JavaScript, mediante WASM. No tiene que ser tan dif铆cil portar mi c贸digo. Lo primero que voy a hacer es un fork de mi repositorio, porque la aplicaci贸n est谩 completamente pensada para ser usada desde terminal, as铆 que habr谩 que cambiar bastantes cosas. <a href=https://github.com/arturo-source/poker-odds-wasm>Este es el nuevo repositorio que funcionar谩 con WASM</a>.</p><h3 id=hacer-el-fork-de-poker-odds>Hacer el fork de poker-odds<a hidden class=anchor aria-hidden=true href=#hacer-el-fork-de-poker-odds>#</a></h3><p>Para hacer el fork, he tenido que crear un repositorio desde cero (porque no puedes hacer forks de tus propios repositorios), clonar el repositorio original, cambiar el remote origin url, y hacer un push al nuevo repositorio. Con los siguientes comandos:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>git clone git@github.com:arturo-source/poker-odds.git poker-odds-wasm
</span></span><span style=display:flex><span>cd poker-odds-wasm/
</span></span><span style=display:flex><span>git remote -v <span style=color:#75715e># show old repositories</span>
</span></span><span style=display:flex><span>git remote set-url origin git@github.com:arturo-source/poker-odds-wasm.git
</span></span><span style=display:flex><span>git push -u origin main
</span></span></code></pre></div><h3 id=modificar-el-programa-para-que-funcione-con-wasm>Modificar el programa para que funcione con WASM<a hidden class=anchor aria-hidden=true href=#modificar-el-programa-para-que-funcione-con-wasm>#</a></h3><p>La estrategia que voy a seguir es, que el propio programa de Go devuelva el HTML. Otra opci贸n ser铆a ejecutar la l贸gica en Go, devolver el resultado a JavaScript, y manipular el DOM para insertar los datos.</p><p>Habitualmente se recomienda esta 煤ltima porque manipular el DOM con WASM es m谩s costoso que con JavaScript, pero he encontrado incompatibilidades entre Go y WASM que no me permiten portar algunas funciones hechas en Go, para que se ejecuten en JS (por ejemplo, en Go una funci贸n puede devolver multiples valores, y cuando lo compilas a WASM no funciona).</p><p>Una ventaja de crear el HTML desde Go es que el estado de la aplicaci贸n se mantiene en Go, en JavaScript s贸lo har茅 una funci贸n para incrustar el HTML. Manejar el estado desde Go hace m谩s sencilla la l贸gica del programa.</p><p>Las modificaciones ser谩n las siguientes:</p><ul><li>Eliminar el archivo <code>console.go</code> (contiene c贸mo imprimir o leer la consola).</li><li>Extraer el <code>func main</code> en un <code>func getResultsInHTML</code> para poder exportarlo, y poder usarlo mediante WASM.</li><li>Usar la l贸gica de <code>func parseCommandLine</code> para parsear el input del usuario con <code>func parseUserInputs</code>.</li><li>Usar un template en HTML que emita un resultado parecido a <code>func printResults</code>.</li></ul><p>Una vez he programado estos cambios, llega la hora de compilar, vuelvo a ejecutar <code>tinygo build -o wasm.wasm -target wasm ./main.go</code>, inserto el <code>wasm.wasm</code> en el HTML como he hecho con el ejemplo de multiplicar, y&mldr;</p><h2 id=wtf-no-funciona>WTF!? No funciona<a hidden class=anchor aria-hidden=true href=#wtf-no-funciona>#</a></h2><p>Despu茅s de todo este tiempo adaptando el programa, obtengo el error <code>panic: unimplemented: (reflect.Type).NumOut()</code>. Ya sospechaba que el compilador de <code>tinygo</code> no ser铆a tan completo como el de <code>go</code>, pero a煤n puedo probar con el compilador oficial.</p><p>Para los interesados, este es el error que estoy obteniendo:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>Uncaught RuntimeError: unreachable
</span></span><span style=display:flex><span>    at runtime._panic (wasm.wasm:0x2b2a)
</span></span><span style=display:flex><span>    at (poker-odds-wasm/*reflect.rawType).NumOut (http://localhost:8000/poker-odds-wasm/wasm.wasm)
</span></span><span style=display:flex><span>    at interface:{Align:func:{}{basic:int},AssignableTo:func:{named:reflect.Type}{basic:bool},Bits:func:{}{basic:int},ChanDir:func:{}{named:reflect.ChanDir},Comparable:func:{}{basic:bool},ConvertibleTo:func:{named:reflect.Type}{basic:bool},Elem:func:{}{named:reflect.Type},Field:func:{basic:int}{named:reflect.StructField},FieldAlign:func:{}{basic:int},FieldByIndex:func:{slice:basic:int}{named:reflect.StructField},FieldByName:func:{basic:string}{named:reflect.StructField,basic:bool},FieldByNameFunc:func:{func:{basic:string}{basic:bool}}{named:reflect.StructField,basic:bool},Implements:func:{named:reflect.Type}{basic:bool},In:func:{basic:int}{named:reflect.Type},IsVariadic:func:{}{basic:bool},Key:func:{}{named:reflect.Type},Kind:func:{}{named:reflect.Kind},Len:func:{}{basic:int},Method:func:{basic:int}{named:reflect.Method},MethodByName:func:{basic:string}{named:reflect.Method,basic:bool},Name:func:{}{basic:string},NumField:func:{}{basic:int},NumIn:func:{}{basic:int},NumMethod:func:{}{basic:int},NumOut:func:{}{basic:int},Out:func:{basic:int}{named:reflect.Type},PkgPath:func:{}{basic:string},Size:func:{}{basic:uintptr},String:func:{}{basic:string}}.NumOut$invoke (wasm.wasm:0x935ed)
</span></span><span style=display:flex><span>    at text/template.goodFunc (wasm.wasm:0x9358e)
</span></span><span style=display:flex><span>    at text/template.addValueFuncs (wasm.wasm:0x944da)
</span></span><span style=display:flex><span>    at (poker-odds-wasm/*text/template.Template).Funcs (http://localhost:8000/poker-odds-wasm/wasm.wasm)
</span></span><span style=display:flex><span>    at (poker-odds-wasm/*html/template.Template).Execute (http://localhost:8000/poker-odds-wasm/wasm.wasm)
</span></span><span style=display:flex><span>    at getResultsInHTML (wasm.wasm:0xb6ce2)
</span></span><span style=display:flex><span>    at getResultsInHTML.command_export (wasm.wasm:0xba714)
</span></span><span style=display:flex><span>    at HTMLFormElement.&lt;anonymous&gt; (poker-odds-wasm/:119:35)
</span></span></code></pre></div><h3 id=diferencias-entre-el-compilador-oficial-de-go-y-tinygo>Diferencias entre el compilador oficial de go y tinygo<a hidden class=anchor aria-hidden=true href=#diferencias-entre-el-compilador-oficial-de-go-y-tinygo>#</a></h3><p>El motivo para utilizar <code>tinygo</code> era que este est谩 preparado para arquitecturas con menos memoria, y produce ejecutables m谩s peque帽os, pero he descubierto que tambi茅n es significativamente m谩s lento. En concreto, en mi ordenador con arquitectura linux/amd64, he obtenido los siguientes resultados:</p><table><thead><tr><th></th><th>tinygo</th><th>go build</th><th>go build -ldflags="-s -w"</th></tr></thead><tbody><tr><td>version</td><td>0.30.0</td><td>1.21.6</td><td>1.21.6</td></tr><tr><td>time</td><td>14,536s</td><td>0,080s</td><td>0,086s</td></tr><tr><td>size</td><td>1,8M</td><td>2,6M</td><td>2,5M</td></tr><tr><td>size syscall/js</td><td>?</td><td>5,2M</td><td>5,1M</td></tr></tbody></table><h3 id=vuelvo-a-insertar-el-wasm-en-el-navegador>Vuelvo a insertar el WASM en el navegador<a hidden class=anchor aria-hidden=true href=#vuelvo-a-insertar-el-wasm-en-el-navegador>#</a></h3><p>Parece que hay otro problema, <code>Uncaught TypeError: Cannot read properties of undefined (reading 'exports')</code>. Nada raro, solo tengo que utilizar el <code>wasm_exec.js</code> de mi versi贸n de Go, que es distinto al de la versi贸n de tinygo. Lo busco con el comando <code>find</code>, como antes, y lo copio de la ruta <code>/usr/lib/go/misc/wasm/wasm_exec.js</code>.</p><p>Un nuevo error aparece <code>Uncaught TypeError: wasm.exports.getResultsInHTML is not a function</code>, debe ser porque el compilador de Go exporta las funciones de una manera distinta, no con <code>//export getResultsInHTML</code>.</p><p>Para comunicar con JS necesitar茅 el paquete <a href=https://pkg.go.dev/syscall/js>https://pkg.go.dev/syscall/js</a>. Las funciones se registran desde el <code>main</code>, y el programa no puede terminar, as铆 que se bloquea el hilo utilizando un canal <code>&lt;-make(chan bool)</code>. Adem谩s la funci贸n tiene que ser del tipo <code>js.FuncOf</code> -> <code>func(this js.Value, args []js.Value) any</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>js</span>.<span style=color:#a6e22e>Global</span>().<span style=color:#a6e22e>Set</span>(<span style=color:#e6db74>&#34;getResultsInHTML&#34;</span>, <span style=color:#a6e22e>js</span>.<span style=color:#a6e22e>FuncOf</span>(<span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>this</span> <span style=color:#a6e22e>js</span>.<span style=color:#a6e22e>Value</span>, <span style=color:#a6e22e>args</span> []<span style=color:#a6e22e>js</span>.<span style=color:#a6e22e>Value</span>) <span style=color:#66d9ef>any</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>handsStr</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>args</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>String</span>()
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>boardStr</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>args</span>[<span style=color:#ae81ff>1</span>].<span style=color:#a6e22e>String</span>()
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>getResultsInHTML</span>(<span style=color:#a6e22e>handsStr</span>, <span style=color:#a6e22e>boardStr</span>)
</span></span><span style=display:flex><span> }))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#75715e>// listen infinite</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;-</span>make(<span style=color:#66d9ef>chan</span> <span style=color:#66d9ef>bool</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Ahora la funci贸n es global en JavaScript, no se llama con <code>wasm.exports.getResultsInHTML</code> sino directamente <code>getResultsInHTML</code>.</p><h2 id=usar-poker-odds>Usar poker-odds<a hidden class=anchor aria-hidden=true href=#usar-poker-odds>#</a></h2><p>A continuaci贸n he insertado un iframe con el c贸digo necesario, para que puedas probar el resultado final.</p><iframe src=/poker-odds-wasm/ frameborder=0 style=width:100vw;height:100vh scrolling=no></iframe></div><footer class=post-footer><ul class=post-tags></ul><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Execute Golang in Browser on x" href="https://x.com/intent/tweet/?text=Execute%20Golang%20in%20Browser&amp;url=https%3a%2f%2farturo-source.github.io%2fes%2fposts%2fejecutar-golang-en-el-navegador%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Execute Golang in Browser on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2farturo-source.github.io%2fes%2fposts%2fejecutar-golang-en-el-navegador%2f&amp;title=Execute%20Golang%20in%20Browser&amp;summary=Execute%20Golang%20in%20Browser&amp;source=https%3a%2f%2farturo-source.github.io%2fes%2fposts%2fejecutar-golang-en-el-navegador%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Execute Golang in Browser on reddit" href="https://reddit.com/submit?url=https%3a%2f%2farturo-source.github.io%2fes%2fposts%2fejecutar-golang-en-el-navegador%2f&title=Execute%20Golang%20in%20Browser"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Execute Golang in Browser on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2farturo-source.github.io%2fes%2fposts%2fejecutar-golang-en-el-navegador%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Execute Golang in Browser on whatsapp" href="https://api.whatsapp.com/send?text=Execute%20Golang%20in%20Browser%20-%20https%3a%2f%2farturo-source.github.io%2fes%2fposts%2fejecutar-golang-en-el-navegador%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Execute Golang in Browser on telegram" href="https://telegram.me/share/url?text=Execute%20Golang%20in%20Browser&amp;url=https%3a%2f%2farturo-source.github.io%2fes%2fposts%2fejecutar-golang-en-el-navegador%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Execute Golang in Browser on ycombinator" href="https://news.ycombinator.com/submitlink?t=Execute%20Golang%20in%20Browser&u=https%3a%2f%2farturo-source.github.io%2fes%2fposts%2fejecutar-golang-en-el-navegador%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://arturo-source.github.io/es/>Arturo Source website</a></span> 路
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copiar";function s(){t.innerHTML="隆copiado!",setTimeout(()=>{t.innerHTML="copiar"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>