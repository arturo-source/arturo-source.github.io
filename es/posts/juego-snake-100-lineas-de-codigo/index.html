<!doctype html><html lang=es dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Programé un Snake con solo 100 líneas de código | Arturo Source website</title>
<meta name=keywords content><meta name=description content="Esta es mi implementación del famoso juego Snake. He tratado de hacerla lo más sencilla posible, y por eso con una cantidad tan pequeña de código."><meta name=author content><link rel=canonical href=https://arturo-source.github.io/es/posts/juego-snake-100-lineas-de-codigo/><link crossorigin=anonymous href=/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=https://arturo-source.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://arturo-source.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://arturo-source.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://arturo-source.github.io/apple-touch-icon.png><link rel=mask-icon href=https://arturo-source.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://arturo-source.github.io/posts/snake-game-in-100-lines-of-code/><link rel=alternate hreflang=es href=https://arturo-source.github.io/es/posts/juego-snake-100-lineas-de-codigo/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://arturo-source.github.io/es/posts/juego-snake-100-lineas-de-codigo/"><meta property="og:site_name" content="Arturo Source website"><meta property="og:title" content="Programé un Snake con solo 100 líneas de código"><meta property="og:description" content="Esta es mi implementación del famoso juego Snake. He tratado de hacerla lo más sencilla posible, y por eso con una cantidad tan pequeña de código."><meta property="og:locale" content="es"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-11-19T19:22:38+01:00"><meta property="article:modified_time" content="2022-11-19T19:22:38+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Programé un Snake con solo 100 líneas de código"><meta name=twitter:description content="Esta es mi implementación del famoso juego Snake. He tratado de hacerla lo más sencilla posible, y por eso con una cantidad tan pequeña de código."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://arturo-source.github.io/es/posts/"},{"@type":"ListItem","position":2,"name":"Programé un Snake con solo 100 líneas de código","item":"https://arturo-source.github.io/es/posts/juego-snake-100-lineas-de-codigo/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Programé un Snake con solo 100 líneas de código","name":"Programé un Snake con solo 100 líneas de código","description":"Esta es mi implementación del famoso juego Snake. He tratado de hacerla lo más sencilla posible, y por eso con una cantidad tan pequeña de código.","keywords":[],"articleBody":"En este post explicaré cómo programé uno de los juegos más emblemáticos de la historia, en solo 100 líneas de código. Pero antes, un poco de contexto:\nPara crear un juego, habitualmente utilizaremos un motor gráfico, por ejemplo Unity o Unreal Engine, entre otros. Dentro de un juego tendremos entidades y sistemas. Pero, ¿Qué son las entidades y los sistemas?\nSi has realizado alguna vez POO (Programación Orientada a Objetos) te será más fácil de entender, pero aún así, comencemos con las entidades.\nUna entidad podría ser la serpiente, en el caso del juego que hablamos, pero otra entidad podría ser una manzana. Tanto la manzana como la serpiente tienen una posición X e Y, que definen en qué parte del mapa están.\nY un sistema sería el que se encarga de actualizar los datos del juego. Por ejemplo, existe el sistema de físicas, que cambia la posición X e Y de la serpiente, según si se tiene que mover hacia arriba, abajo, izquierda, o derecha.\nEntonces, ¿cómo has programado el juego? Vamos a dejar de hacer un lío, tanto sistema, entidad, etc. ¡Y vamos a ver código! Las primeras líneas simplemente son constantes (configuraciones del juego):\nconst SQUARE_SIZE = 20; const GAME_WIDTH = 800; const GAME_HEIGHT = 800; const canvas = document.getElementById('game'); const ctx = canvas.getContext('2d'); // set width and height full screen canvas.width = GAME_WIDTH; canvas.height = GAME_HEIGHT; Después creamos tres objetos que son las “cosas” que veremos en la pantalla (entidades).\nvar snake = { body: [ { x: 400, y: 400 }, ], nextMove: 'right', }; var food = { x: 0, y: 0, }; var game = { score: 0, speed: 100, isOver: false, }; ¡Y ahora vamos con el primer sistema! Se trata del sistema de renderizado, básicamente, dibujar las “cosas“ (entidades) en la pantalla:\nfunction drawSnake() { // Draw head ctx.fillStyle = '#3a5a40'; ctx.fillRect(snake.body[0].x, snake.body[0].y, SQUARE_SIZE, SQUARE_SIZE); // Draw body ctx.fillStyle = '#a3b18a'; snake.body.slice(1).forEach(function (part) { ctx.fillRect(part.x, part.y, SQUARE_SIZE, SQUARE_SIZE); }); } function drawFood() { ctx.fillStyle = 'red'; ctx.fillRect(food.x, food.y, SQUARE_SIZE, SQUARE_SIZE); } function drawScore() { ctx.fillStyle = 'black'; ctx.font = '20px Arial'; ctx.fillText('Score: ' + game.score, 10, 30); } function drawGameOver() { ctx.fillStyle = 'black'; ctx.font = '50px Arial'; ctx.fillText('Game Over', 200, 400); } Y, por supuesto, tenemos una función principal que llama a todas ellas. Lo primero que hace es dibujar toda la pantalla de blanco, y después el resto.\nfunction drawGame() { ctx.clearRect(0, 0, GAME_WIDTH, GAME_HEIGHT); drawSnake(); drawFood(); drawScore(); if (game.isOver) { drawGameOver(); } } ¡Ahora tenemos que mover a la serpiente! Tenemos que modificar las posiciones X e Y de la serpiente. Esto se hace con la siguiente función (lo que llamaríamos sistema de físicas):\nfunction moveSnake() { var head = snake.body[0]; var newHead = { x: head.x, y: head.y, }; switch (snake.nextMove) { case 'right': newHead.x += SQUARE_SIZE; break; case 'left': newHead.x -= SQUARE_SIZE; break; case 'up': newHead.y -= SQUARE_SIZE; break; case 'down': newHead.y += SQUARE_SIZE; break; } snake.body.unshift(newHead); snake.body.pop(); } Y lo siguiente que haremos será comprobar si la serpiente ha muerto, o si se ha comido la manzana (sí, ya sabes por dónde vamos, esto se llama sistema de colisiones).\n// Check if snake is out of game function isSnakeOutOfGame() { var head = snake.body[0]; return head.x \u003c 0 || head.x \u003e= GAME_WIDTH || head.y \u003c 0 || head.y \u003e= GAME_HEIGHT; } // Check if snake is eating food function isSnakeEatingFood() { var head = snake.body[0]; return head.x === food.x \u0026\u0026 head.y === food.y; } // Check if snake is eating itself function isSnakeEatingItself() { var head = snake.body[0]; return snake.body.slice(1).some(function (part) { return part.x === head.x \u0026\u0026 part.y === head.y; }); } Por último, para que el jugador pueda moverse por el mapa, necesitamos que el juego interactue con un controlador, en este caso el teclado. Esto se llama sistema de input.\nfunction handleKeyDown(e) { switch (e.key) { case 'ArrowLeft': if (snake.nextMove !== 'right') { snake.nextMove = 'left'; } break; case 'ArrowUp': if (snake.nextMove !== 'down') { snake.nextMove = 'up'; } break; case 'ArrowRight': if (snake.nextMove !== 'left') { snake.nextMove = 'right'; } break; case 'ArrowDown': if (snake.nextMove !== 'up') { snake.nextMove = 'down'; } break; } } Ahora ya tenemos los cuatro sistemas que contienen el 99% de los videojuegos, después puedes añadirle los que quieras, según cuál sea la intención del juego. En este caso necesitamos el sistema de spawn, para hacer aparecer a la manzana cada vez que la serpiente se coma una.\nfunction generateFood() { food.x = Math.floor(Math.random() * (GAME_WIDTH / SQUARE_SIZE)) * SQUARE_SIZE; food.y = Math.floor(Math.random() * (GAME_HEIGHT / SQUARE_SIZE)) * SQUARE_SIZE; } Lo único que nos falta para que esto sea un juego convencional es un main loop, y un estado inicial. Esto sirve para saber cómo empieza el juego, y ejecutar todos los sistemas en orden. Además he añadido una función auxiliar (isGameOver) para saber si la serpiente está muerta. Por lo general haríamos un sistema de vida para controlar esto, pero este juego es tan simple que no lo necesita.\nfunction isGameOver() { return isSnakeOutOfGame() || isSnakeEatingItself(); } // Main game loop function main() { if (isGameOver()) { game.isOver = true; drawGameOver(); return; } if (isSnakeEatingFood()) { snake.body.push({}); game.score += 1; game.speed -= 1; generateFood(); } moveSnake(); drawGame(); setTimeout(main, game.speed); } // Start game function startGame() { snake.body = [ { x: GAME_WIDTH / 2, y: GAME_HEIGHT / 2 }, ]; game = { score: 0, speed: 100, }; generateFood(); main(); } En este caso, el main loop no es un bucle for, o while, sino que aprovechamos que JavaScript está diseñado para ser programado mediante eventos y le decimos al final del main loop que vuelva a llamarse a sí mismo dentro de un tiempo (en este caso 100ms).\nPor último, cabe comentar que comúnmente se ejecutan todos los sistemas en el main loop, en este caso no se está ejecutando el sistema de input porque JavaScript permite poner un listener en paralelo. Esto lo hacemos con el siguiente listener:\ndocument.addEventListener('keydown', handleKeyDown); document.getElementById('start').addEventListener('click', startGame); Ahora quiero aprender más, ¿cómo creo otro juego? Ahora que has entendido el concepto de entidad y sistema, ya puedes empezar a programar tu propia idea de videojuego. Ya sea sin motor gráfico (como lo acabamos de ver ahora), o utilizando un motor profesional, ya sea Unity, Game Maker, Unreal Engine, o cual sea.\nPero antes, si quieres ver más en profundidad te aportaré dos recursos:\nMi TFG (también en GitHub), el cual está dividido en tres partes, en la primera se hace un motor de videojuegos, en la segunda se crea un juego usando este motor, y en la tercera se añade inteligencia artificial a este juego creado. El curso de mi tutor del TFG. Con el cual aprendí todo lo que sé de videojuegos, y si te interesa aprender a hacer tu propio motor de videojuegos desde cero, es el mejor recurso que vas a tener. Prueba el juego aquí mismo ","wordCount":"1151","inLanguage":"es","datePublished":"2022-11-19T19:22:38+01:00","dateModified":"2022-11-19T19:22:38+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://arturo-source.github.io/es/posts/juego-snake-100-lineas-de-codigo/"},"publisher":{"@type":"Organization","name":"Arturo Source website","logo":{"@type":"ImageObject","url":"https://arturo-source.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://arturo-source.github.io/es/ accesskey=h title="Arturo Source website (Alt + H)">Arturo Source website</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://arturo-source.github.io/ title=English aria-label=:uk:>🇬🇧</a></li></ul></div></div><ul id=menu><li><a href=https://arturo-source.github.io/es/archivo/ title=Archivo><span>Archivo</span></a></li><li><a href=https://arturo-source.github.io/es/buscar/ title=Buscar><span>Buscar</span></a></li><li><a href=https://arturo-source.github.io/es/tags/ title=Etiquetas><span>Etiquetas</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://arturo-source.github.io/es/>Inicio</a>&nbsp;»&nbsp;<a href=https://arturo-source.github.io/es/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Programé un Snake con solo 100 líneas de código</h1><div class=post-description>Esta es mi implementación del famoso juego Snake. He tratado de hacerla lo más sencilla posible, y por eso con una cantidad tan pequeña de código.</div><div class=post-meta><span title='2022-11-19 19:22:38 +0100 +0100'>noviembre 19, 2022</span>&nbsp;·&nbsp;6 min&nbsp;|&nbsp;Traducciones:<ul class=i18n_list><li><a href=https://arturo-source.github.io/posts/snake-game-in-100-lines-of-code/>🇬🇧</a></li></ul></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Tabla de Contenidos</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#entonces-cómo-has-programado-el-juego>Entonces, ¿cómo has programado el juego?</a></li><li><a href=#ahora-quiero-aprender-más-cómo-creo-otro-juego>Ahora quiero aprender más, ¿cómo creo otro juego?</a></li><li><a href=#prueba-el-juego-aquí-mismo>Prueba el juego aquí mismo</a></li></ul></nav></div></details></div><div class=post-content><p>En este post explicaré cómo programé uno de los juegos más emblemáticos de la historia, en solo 100 líneas de código. Pero antes, un poco de contexto:</p><p>Para crear un juego, habitualmente utilizaremos un motor gráfico, por ejemplo Unity o Unreal Engine, entre otros. Dentro de un juego tendremos <strong>entidades</strong> y <strong>sistemas</strong>. Pero, ¿Qué son las entidades y los sistemas?</p><p>Si has realizado alguna vez POO (Programación Orientada a Objetos) te será más fácil de entender, pero aún así, comencemos con las entidades.</p><p><strong>Una entidad</strong> podría ser la serpiente, en el caso del juego que hablamos, pero otra entidad podría ser una manzana. Tanto la manzana como la serpiente tienen una posición X e Y, que definen en qué parte del mapa están.</p><p>Y <strong>un sistema</strong> sería el que se encarga de actualizar los datos del juego. Por ejemplo, existe el sistema de físicas, que cambia la posición X e Y de la serpiente, según si se tiene que mover hacia arriba, abajo, izquierda, o derecha.</p><h2 id=entonces-cómo-has-programado-el-juego>Entonces, ¿cómo has programado el juego?<a hidden class=anchor aria-hidden=true href=#entonces-cómo-has-programado-el-juego>#</a></h2><p>Vamos a dejar de hacer un lío, tanto sistema, entidad, etc. ¡Y vamos a ver código! Las primeras líneas simplemente son constantes (configuraciones del juego):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>SQUARE_SIZE</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>20</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>GAME_WIDTH</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>800</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>GAME_HEIGHT</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>800</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>canvas</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#39;game&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ctx</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>getContext</span>(<span style=color:#e6db74>&#39;2d&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// set width and height full screen
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>GAME_WIDTH</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>GAME_HEIGHT</span>;
</span></span></code></pre></div><p>Después creamos tres objetos que son las &ldquo;cosas&rdquo; que veremos en la pantalla (<strong>entidades</strong>).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>snake</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>body</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        { <span style=color:#a6e22e>x</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>400</span>, <span style=color:#a6e22e>y</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>400</span> },
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>nextMove</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;right&#39;</span>,
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>food</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>x</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>y</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>game</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>score</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>speed</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>100</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>isOver</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>¡Y ahora vamos con el primer <strong>sistema</strong>! Se trata del <strong>sistema de renderizado</strong>, básicamente, dibujar las “cosas“ (<strong>entidades</strong>) en la pantalla:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>drawSnake</span>() {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Draw head
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>fillStyle</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;#3a5a40&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>fillRect</span>(<span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>body</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>body</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>SQUARE_SIZE</span>, <span style=color:#a6e22e>SQUARE_SIZE</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Draw body
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>fillStyle</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;#a3b18a&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>1</span>).<span style=color:#a6e22e>forEach</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>part</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>fillRect</span>(<span style=color:#a6e22e>part</span>.<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>part</span>.<span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>SQUARE_SIZE</span>, <span style=color:#a6e22e>SQUARE_SIZE</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>drawFood</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>fillStyle</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;red&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>fillRect</span>(<span style=color:#a6e22e>food</span>.<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>food</span>.<span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>SQUARE_SIZE</span>, <span style=color:#a6e22e>SQUARE_SIZE</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>drawScore</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>fillStyle</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;black&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>font</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;20px Arial&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>fillText</span>(<span style=color:#e6db74>&#39;Score: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>game</span>.<span style=color:#a6e22e>score</span>, <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>30</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>drawGameOver</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>fillStyle</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;black&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>font</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;50px Arial&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>fillText</span>(<span style=color:#e6db74>&#39;Game Over&#39;</span>, <span style=color:#ae81ff>200</span>, <span style=color:#ae81ff>400</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Y, por supuesto, tenemos una función principal que llama a todas ellas. Lo primero que hace es dibujar toda la pantalla de blanco, y después el resto.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>drawGame</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>clearRect</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>GAME_WIDTH</span>, <span style=color:#a6e22e>GAME_HEIGHT</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>drawSnake</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>drawFood</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>drawScore</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>game</span>.<span style=color:#a6e22e>isOver</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>drawGameOver</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>¡Ahora tenemos que mover a la serpiente! Tenemos que modificar las posiciones X e Y de la serpiente. Esto se hace con la siguiente función (lo que llamaríamos <strong>sistema de físicas</strong>):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>moveSnake</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>head</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>body</span>[<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>newHead</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>x</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>x</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>y</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>y</span>,
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>switch</span> (<span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>nextMove</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;right&#39;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>newHead</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>SQUARE_SIZE</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;left&#39;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>newHead</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>-=</span> <span style=color:#a6e22e>SQUARE_SIZE</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;up&#39;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>newHead</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>-=</span> <span style=color:#a6e22e>SQUARE_SIZE</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;down&#39;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>newHead</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>SQUARE_SIZE</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>unshift</span>(<span style=color:#a6e22e>newHead</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Y lo siguiente que haremos será comprobar si la serpiente ha muerto, o si se ha comido la manzana (sí, ya sabes por dónde vamos, esto se llama <strong>sistema de colisiones</strong>).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// Check if snake is out of game
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>isSnakeOutOfGame</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>head</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>body</span>[<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>&gt;=</span> <span style=color:#a6e22e>GAME_WIDTH</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>&gt;=</span> <span style=color:#a6e22e>GAME_HEIGHT</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Check if snake is eating food
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>isSnakeEatingFood</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>head</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>body</span>[<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>food</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>food</span>.<span style=color:#a6e22e>y</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Check if snake is eating itself
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>isSnakeEatingItself</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>head</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>body</span>[<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>1</span>).<span style=color:#a6e22e>some</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>part</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>part</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>part</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>y</span>;
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Por último, para que el jugador pueda moverse por el mapa, necesitamos que el juego interactue con un controlador, en este caso el teclado. Esto se llama <strong>sistema de input</strong>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>handleKeyDown</span>(<span style=color:#a6e22e>e</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>switch</span> (<span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>key</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;ArrowLeft&#39;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>nextMove</span> <span style=color:#f92672>!==</span> <span style=color:#e6db74>&#39;right&#39;</span>) {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>nextMove</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;left&#39;</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;ArrowUp&#39;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>nextMove</span> <span style=color:#f92672>!==</span> <span style=color:#e6db74>&#39;down&#39;</span>) {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>nextMove</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;up&#39;</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;ArrowRight&#39;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>nextMove</span> <span style=color:#f92672>!==</span> <span style=color:#e6db74>&#39;left&#39;</span>) {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>nextMove</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;right&#39;</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;ArrowDown&#39;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>nextMove</span> <span style=color:#f92672>!==</span> <span style=color:#e6db74>&#39;up&#39;</span>) {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>nextMove</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;down&#39;</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Ahora ya tenemos los cuatro sistemas que contienen el 99% de los videojuegos, después puedes añadirle los que quieras, según cuál sea la intención del juego. En este caso necesitamos el <strong>sistema de spawn</strong>, para hacer aparecer a la manzana cada vez que la serpiente se coma una.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>generateFood</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>food</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>floor</span>(Math.<span style=color:#a6e22e>random</span>() <span style=color:#f92672>*</span> (<span style=color:#a6e22e>GAME_WIDTH</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>SQUARE_SIZE</span>)) <span style=color:#f92672>*</span> <span style=color:#a6e22e>SQUARE_SIZE</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>food</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>floor</span>(Math.<span style=color:#a6e22e>random</span>() <span style=color:#f92672>*</span> (<span style=color:#a6e22e>GAME_HEIGHT</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>SQUARE_SIZE</span>)) <span style=color:#f92672>*</span> <span style=color:#a6e22e>SQUARE_SIZE</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Lo único que nos falta para que esto sea un juego convencional es un main loop, y un estado inicial. Esto sirve para saber cómo empieza el juego, y ejecutar todos los sistemas en orden. Además he añadido una función auxiliar (isGameOver) para saber si la serpiente está muerta. Por lo general haríamos un <strong>sistema de vida</strong> para controlar esto, pero este juego es tan simple que no lo necesita.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>isGameOver</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>isSnakeOutOfGame</span>() <span style=color:#f92672>||</span> <span style=color:#a6e22e>isSnakeEatingItself</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Main game loop
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isGameOver</span>()) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>game</span>.<span style=color:#a6e22e>isOver</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>drawGameOver</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isSnakeEatingFood</span>()) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>push</span>({});
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>game</span>.<span style=color:#a6e22e>score</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>game</span>.<span style=color:#a6e22e>speed</span> <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>generateFood</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>moveSnake</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>drawGame</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setTimeout</span>(<span style=color:#a6e22e>main</span>, <span style=color:#a6e22e>game</span>.<span style=color:#a6e22e>speed</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Start game
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>startGame</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>body</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>        { <span style=color:#a6e22e>x</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>GAME_WIDTH</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>y</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>GAME_HEIGHT</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span> },
</span></span><span style=display:flex><span>    ];
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>game</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>score</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>speed</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>100</span>,
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>generateFood</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>main</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>En este caso, el main loop no es un bucle for, o while, sino que aprovechamos que JavaScript está diseñado para ser programado mediante eventos y le decimos al final del main loop que vuelva a llamarse a sí mismo dentro de un tiempo (en este caso 100ms).</p><p>Por último, cabe comentar que comúnmente se ejecutan todos los sistemas en el main loop, en este caso no se está ejecutando el <strong>sistema de input</strong> porque JavaScript permite poner un listener en paralelo. Esto lo hacemos con el siguiente listener:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>document.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#39;keydown&#39;</span>, <span style=color:#a6e22e>handleKeyDown</span>);
</span></span><span style=display:flex><span>document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#39;start&#39;</span>).<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#39;click&#39;</span>, <span style=color:#a6e22e>startGame</span>);
</span></span></code></pre></div><h2 id=ahora-quiero-aprender-más-cómo-creo-otro-juego>Ahora quiero aprender más, ¿cómo creo otro juego?<a hidden class=anchor aria-hidden=true href=#ahora-quiero-aprender-más-cómo-creo-otro-juego>#</a></h2><p>Ahora que has entendido el concepto de entidad y sistema, ya puedes empezar a programar tu propia idea de videojuego. Ya sea sin motor gráfico (como lo acabamos de ver ahora), o utilizando un motor profesional, ya sea Unity, Game Maker, Unreal Engine, o cual sea.</p><p>Pero antes, si quieres ver más en profundidad te aportaré dos recursos:</p><ol><li><a href=http://rua.ua.es/dspace/handle/10045/115983>Mi TFG</a> (también <a href=https://github.com/arturo-source/tfg-motor-juego-y-ia>en GitHub</a>), el cual está dividido en tres partes, en la primera se hace un motor de videojuegos, en la segunda se crea un juego usando este motor, y en la tercera se añade inteligencia artificial a este juego creado.</li><li><a href="https://www.youtube.com/watch?v=7YBzHJJYpZo&amp;list=PLmxqg54iaXrhTqZxylLPo0nov0OoyJqiS">El curso de mi tutor del TFG</a>. Con el cual aprendí todo lo que sé de videojuegos, y si te interesa aprender a hacer tu propio motor de videojuegos desde cero, es el mejor recurso que vas a tener.</li></ol><h2 id=prueba-el-juego-aquí-mismo>Prueba el juego aquí mismo<a hidden class=anchor aria-hidden=true href=#prueba-el-juego-aquí-mismo>#</a></h2><iframe src=/snake-game/ frameborder=0 style=width:100vw;height:100vh scrolling=no></iframe></div><footer class=post-footer><ul class=post-tags></ul><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Programé un Snake con solo 100 líneas de código on x" href="https://x.com/intent/tweet/?text=Program%c3%a9%20un%20Snake%20con%20solo%20100%20l%c3%adneas%20de%20c%c3%b3digo&amp;url=https%3a%2f%2farturo-source.github.io%2fes%2fposts%2fjuego-snake-100-lineas-de-codigo%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Programé un Snake con solo 100 líneas de código on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2farturo-source.github.io%2fes%2fposts%2fjuego-snake-100-lineas-de-codigo%2f&amp;title=Program%c3%a9%20un%20Snake%20con%20solo%20100%20l%c3%adneas%20de%20c%c3%b3digo&amp;summary=Program%c3%a9%20un%20Snake%20con%20solo%20100%20l%c3%adneas%20de%20c%c3%b3digo&amp;source=https%3a%2f%2farturo-source.github.io%2fes%2fposts%2fjuego-snake-100-lineas-de-codigo%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Programé un Snake con solo 100 líneas de código on reddit" href="https://reddit.com/submit?url=https%3a%2f%2farturo-source.github.io%2fes%2fposts%2fjuego-snake-100-lineas-de-codigo%2f&title=Program%c3%a9%20un%20Snake%20con%20solo%20100%20l%c3%adneas%20de%20c%c3%b3digo"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Programé un Snake con solo 100 líneas de código on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2farturo-source.github.io%2fes%2fposts%2fjuego-snake-100-lineas-de-codigo%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Programé un Snake con solo 100 líneas de código on whatsapp" href="https://api.whatsapp.com/send?text=Program%c3%a9%20un%20Snake%20con%20solo%20100%20l%c3%adneas%20de%20c%c3%b3digo%20-%20https%3a%2f%2farturo-source.github.io%2fes%2fposts%2fjuego-snake-100-lineas-de-codigo%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Programé un Snake con solo 100 líneas de código on telegram" href="https://telegram.me/share/url?text=Program%c3%a9%20un%20Snake%20con%20solo%20100%20l%c3%adneas%20de%20c%c3%b3digo&amp;url=https%3a%2f%2farturo-source.github.io%2fes%2fposts%2fjuego-snake-100-lineas-de-codigo%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Programé un Snake con solo 100 líneas de código on ycombinator" href="https://news.ycombinator.com/submitlink?t=Program%c3%a9%20un%20Snake%20con%20solo%20100%20l%c3%adneas%20de%20c%c3%b3digo&u=https%3a%2f%2farturo-source.github.io%2fes%2fposts%2fjuego-snake-100-lineas-de-codigo%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://arturo-source.github.io/es/>Arturo Source website</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copiar";function s(){t.innerHTML="¡copiado!",setTimeout(()=>{t.innerHTML="copiar"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>